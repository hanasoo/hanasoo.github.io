<html>
<head>
<meta charset='utf-8'>
</head>
<body style="margin:0">
<canvas id=q>
<script type="text/javascript">
var s = window.screen;
var width = q.width = s.width;
var height = q.height = s.height;

var BLANK_LENGTH = 1;
var MESSAGES =
  'お誕生日おめでとうございます   ' +
  'Happy Birthday!  ' +
  '端羽英子さんおめでとうございます    ' +
  '今年も良い一年になりますように';

var line = function(x) {
  this.x = x;
  this.y = 1;
  this.size = 10 + Math.floor(Math.random() * 10);
  this._char_counter = 0;
};
line.prototype = {
  get_char: function() {
    var c = MESSAGES[this._char_counter];
    return c ? c : '　';
  },
  refresh: function() {
    if (this.y > 758 + Math.random() * 1000) {
      this.y = Math.random() * -1000;
      this._char_counter = 0;
      return;
    }
    this.y += this.size;
    this._char_counter++;
    if (MESSAGES.length + BLANK_LENGTH == this._char_counter) {
      this._char_counter = 0;
    }
  }
};

var lines = Array(256);
var init = function () {
  var _x = 0;
  for (var i = 0; i < 256; i++) {
    lines[i] = new line(_x);
    _x += lines[i].size;
  }
};

var draw = function () {
  q.getContext('2d').fillStyle = 'rgba(0,0,0,.05)';
  q.getContext('2d').fillRect(0,0,width,height);
  q.getContext('2d').fillStyle = '#0f0';

  lines.map(function(line, index){
    var text = line.get_char();
    q.getContext('2d').font = line.size + "px 'sans-serif'";
    q.getContext('2d').fillText(text, line.x, line.y);
    line.refresh();
  });
};

init();
setInterval(draw, 50);

</script>
</html>
